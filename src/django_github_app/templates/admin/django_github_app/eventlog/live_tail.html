{% extends "admin/base_site.html" %}
{% load admin_urls static %}
{% load i18n %}
{% load static %}
{% block extrastyle %}
    <link rel="stylesheet"
          href="{% static "django_github_app/css/live_tail.css" %}">
{% endblock extrastyle %}
{% block extrahead %}
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.6/dist/htmx.min.js"
            integrity="sha384-Akqfrbj/HpNVo8k11SXBb6TlBWmXXlYQrCSqEWmyKJe+hDm3Z/B2WVG4smwBkRVm"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/htmx-ext-sse@2.2.2"
            integrity="sha384-yhS+rWHB2hwrHEg86hWiQV7XL6u+PH9X+3BlmS2+CNBaGYU8Nd7RZ2rZ9DWXgTdr"
            crossorigin="anonymous"></script>
{% endblock extrahead %}
{% block content %}
    <div class="live-tail-container"
         hx-ext="sse"
         sse-connect="stream/?since={{ page_load_time }}"
         data-page-load-time="{{ page_load_time }}">
        <div class="live-tail-header">
            <div class="status-section">
                <span class="connection-status" id="status">Connecting...</span>
                <span class="queue-info" id="queue-info"></span>
            </div>
            <div class="controls">
                <button id="pause-btn" class="button">Pause</button>
                <button id="clear-btn" class="button">Clear</button>
            </div>
        </div>
        <div class="live-tail-output"
             id="events-container"
             sse-swap="event"
             hx-swap="afterbegin"></div>
    </div>
{% endblock content %}
{% block extrabody %}
    <script src="{% static 'django_github_app/js/live_tail_htmx.js' %}"></script>
{% endblock extrabody %}
